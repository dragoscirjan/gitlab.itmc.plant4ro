
<template>
  <section class="au-animate">
    <div class="container">
      <h1 class="page-title">${heading}</h1>
      <div class="tabs">
        <ul role="tablist" class="nav nav-tabs">
          <li role="presentation" class.bind="isCorporate ? '' : 'active'"><a href="#individualDonations" role="tab" aria-controls="individualDonations" data-toggle="tab" click.trigger="toggleCorporate()">Donatii individuale</a></li>
          <li role="presentation" class.bind="isCorporate ? 'active' : ''"><a href="#corporateDonations" role="tab" aria-controls="corporateDonations" data-toggle="tab" click.trigger="toggleCorporate()">Donatii corporate</a></li>
        </ul>
        <div class="tab-content">
          <div id="individualDonations" role="tabpanel" class.bind="'tab-pane ' + (isCorporate ? '' : 'active')">
            <p><strong>Pentru fiecare donatie de 5 ron </strong>vom planta un puiet in numele tau, 
              urmand sa iti comunicam locul si data plantarii. Astfel creem legatura intre tine si padure.
            </p>
            <p><strong>Planteaza pentru Romania!</strong></p>
          </div>
          <div id="corporateDonations" role="tabpanel" class.bind="'tab-pane ' + (isCorporate ? 'active' : '')">
            <p><strong>Pentru fiecare donatie de 5 ron </strong>vom planta un puiet in numele tau, 
              urmand sa iti comunicam locul si data plantarii. Astfel creem legatura intre tine si padure.
            </p>
            <p><strong>Planteaza pentru Romania!</strong></p>
          </div>
        </div>
        <form id="donationsForm" action="" validate.bind="validation" submit.delegate="proceedToPayment()" data-parsley-excluded="input[type=button], input[type=submit], input[type=reset], input[type=hidden], [disabled], :hidden, #anonymous, #total" class="form--plant">
          <div class.bind="'form-group' + (isCorporate ? '' : ' sr-only')">
            <div class="form-group">
              <label for="company">Companie<span class="h-text-primary">&nbsp;*</span></label>
              <div class="form-wrap">
                <input id="company" type="text" value.bind="model.company" required.bind="isCorporate" data-parsley-minlength.bind="isCorporate ? 6 : 0" class="form-control"/>
              </div>
            </div>
            <div class="form-group">
              <label for="vatNumber">Numar de inregistrare<span class="h-text-primary">&nbsp;*</span></label>
              <div class="form-wrap">
                <input id="vatNumber" type="text" value.bind="model.vat" required.bind="isCorporate" data-parsley-pattern.bind="isCorporate ? '(RO)?\\d{}' : '.*'" class="form-control"/>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="name"><span innerHtml.bind="isCorporate ? 'Persoana de contact' : 'Nume'"></span><span class="h-text-primary">&nbsp;*</span></label>
            <div class="form-wrap">
              <input id="name" type="text" value.bind="model.name" required="" data-parsley-minlength="3" class="form-control"/>
            </div>
          </div>
          <div class="form-group">
            <label for="email">Email<span class="h-text-primary">&nbsp;*</span></label>
            <div class="form-wrap">
              <input id="email" type="email" value.bind="model.email" required="" data-parsley-type="email" class="form-control"/>
            </div>
          </div>
          <div class.bind="'form-group' + (isCorporate ? '' : ' sr-only')">
            <div class="form-group">
              <label for="phone">Telefon</label>
              <div class="form-wrap">
                <input id="phone" type="text" value.bind="model.phone" required.bind="isCorporate" data-parsley-pattern.bind="isCorporate ? '(\\+|00)?\\d{5,}' : '.*'" class="form-control"/>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="treesQty">Cati copaci vrei sa plantezi?<span class="h-text-primary">&nbsp;*</span></label>
            <div class="slider-wrapper"><span id="treesQtyVal" class="slider-value">${model.trees}</span>
              <input id="treesQty" type="text" data-slider-min="1" data-slider-max="${maxDonation / treePrice}" data-slider-step="1" data-slider-value="${model.trees}" value.bind="model.trees" data-slider-tooltip="hide"/>
            </div>
          </div>
          <div class="form-group h-margin-top-40 h-margin-bottom-40">
            <label for="total">Total de plata</label>
            <div class="form-wrap">
              <div class="input-group">
                <div class="input-group-addon">RON</div>
                <input id="total" type="text" readonly="readonly" value="${paymentModel.donation.total}" class="form-control"/>
              </div>
            </div>
          </div>
          <p>Dragi prieteni ai padurilor, pentru donatii mai mari de ${maxDonation} RON va rugam sa ne <a href="/#/contact">contactati</a></p>
          <hr/>
          <p class="h-margin-bottom-20 h-text-primary"><strong>Modalitatea de donatie</strong></p>
          <div class="form-group">
            <div class="radio">
              <input id="payMethodM" type="radio" name="payMethod" value="mobilpay" checked.bind="model.donation.method" class="sr-only"/>
              <label for="payMethodM"> <strong>MobilPay</strong>: ${paymentModel.donation.total} RON</label>
            </div>
          </div>
          <hr/>
          <div class="form-group">
            <div class="checkbox form-wrap">
              <div>
                <input id="anonymous" type="checkbox" checked.bind="anonymous" class="sr-only"/>
                <label for="anonymous">Doresc sa raman anonim (Numele tau nu va aparea in nicio zona a site-ului)</label>
              </div>
            </div>
            <div class="checkbox form-wrap">
              <div>
                <input id="agreement" type="checkbox" checked.bind="agreement" required="" class="sr-only"/>
                <label for="agreement">Sunt de acord cu <a href="/#/termeni-si-conditii">termenii si conditiile</a></label>
              </div>
            </div>
          </div>
          <div class="form-group h-margin-top-40 h-margin-bottom-40">
            <div class="form-wrap">
              <div>
                <recaptcha sitekey="6LcY4xgTAAAAAMeib0PTHPWykIbArxuMUuMTknt4" theme="light" callback="toggleRecaptchaValidate"></recaptcha>
                <input id="rc" type="checkbox" checked.bind="notRobot" required="" class="sr-only"/>
              </div>
            </div>
          </div>
          <div class="form-group text-center">
            <button type="submit" class="btn btn--secondary">Planteaza</button>
          </div>
        </form>
      </div>
    </div>
  </section>
  <div id="braintree-modal" tabindex="-1" role="dialog" class="modal modal-braintree fade"> 
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header"><img src="/dist/assets/img/braintree-logo.jpg" alt="Braintree - A Paypal Company Logo"/></div>
        <div class="modal-body">
          <form id="checkout" method="post" action="/services/index.php/donate/braintree/pay">
            <div id="braintree-payment-form"></div>
            <input type="submit" value="Planteaza" class="sr-only"/>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" data-dismiss="modal" class="btn btn--sm btn--neutral">Renunta</button>
          <button type="button" class="btn btn--sm btn--secondary">Doneaza</button>
        </div>
      </div>
    </div>
  </div>
  <div id="mobilpay-modal" tabindex="-1" role="dialog" class="modal modal-mobilpay fade"> 
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header"><img src="/dist/assets/img/mobilpay-logo.png" alt="Braintree - A Paypal Company Logo" width="100%"/></div>
        <div class="modal-body">
          <div class="splash splash--sm center-block">
            <div class="splash__circle"></div>
            <div class="splash__mask">
              <div class="splash__line"></div>
            </div><img src="/dist/assets/img/loader-logo.png" alt="" class="splash__logo"/>
          </div>
          <form method="post" action.bind="mobilpay.url">
            <input type="hidden" name="env_key" value.bind="mobilpay.env_key"/>
            <input type="hidden" name="data" value.bind="mobilpay.data"/>
          </form>
        </div>
        <div class="modal-footer">
          <p>Vei redirectat catre pagina de plati securizata a <a href="http://mobilpay.ro" target="_blank">mobilpay.ro</a></p>
        </div>
      </div>
    </div>
  </div>
  <div id="donation-error-modal" tabindex="-1" role="dialog" class="modal modal-msg fade"> 
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button data-dismiss="modal" aria-label="Close" data-resolve="close" class="close"><span aria-hidden="true">&times;</span></button>
        </div>
        <div class="modal-body">
          <div class="modal-icon"><i class="fa fa-exclamation-triangle"></i></div>
          <div class="modal-body-content">
            <h4 class="text-danger">Tranzactia dumneavoastra a esuat cu urmatorul mesaj:</h4>
            <p> <i>${donationErrorModal.message}</i></p>
            <p>
               
              Pentru mai multe detalii, va rugam sa ne contactati la adresa de mail <a href="mailto:office@prieteniipadurilor.ro">office@prieteniipadurilor.ro</a>.
            </p>
          </div>
        </div>
        <div class="modal-footer">
          <button data-dismiss="modal" class="btn btn--sm btn--neutral h-margin-top-30">Mai incearca o data</button>
        </div>
      </div>
    </div>
  </div>
</template>